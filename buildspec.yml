version: 0.2
env:
  variables:
    APP_NAME: "bancash_front"
phases:
  install:
    runtime-versions:
      nodejs: latest
    commands:
      - echo -e "\n-- $APP_NAME ---> install process started"

      - echo -e "Prepare nodejs and install the latest version of the Angular Framework.\n"
      - npm install && npm install -g @angular/cli
  pre_build:
    commands:
      echo -e "\nInstall the dependencies needed to run the app INSIDE"
      echo -e "the CI/CD environment ;-)\n"
      npm install
  build:
    commands:
      - echo -e "\nLet's building our $APP_NAME app!\n"
      - ng build $APP_NAME
  post_build:
    commands:
      - echo -e "\nbuild process finished, it's time to upload or LABOR to S3 now!\n"
      - ls -la
      - cd dist/$APP_NAME
      - ls -la
      - aws s3 sync . s3://ecfbancashfront --delete
artifacts:
  files:
    - '**/*'
  name: $APP_NAME-$AWS_REGION
  base-directory : "dist/bancash*"
